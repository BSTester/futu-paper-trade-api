# å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸ“‹ å‰ç½®è¦æ±‚

- Python 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬
- å¯Œé€”ç‰›ç‰›è´¦æˆ·ï¼ˆå·²æ³¨å†Œå¹¶ç™»å½•ï¼‰
- ç½‘ç»œè¿æ¥

## ğŸš€ 5åˆ†é’Ÿå¿«é€Ÿå¯åŠ¨

### æ­¥éª¤1: å®‰è£…ä¾èµ–

åŒå‡»è¿è¡Œ `setup.bat` æˆ–æ‰‹åŠ¨æ‰§è¡Œï¼š

```bash
pip install -r requirements.txt
```

### æ­¥éª¤2: è·å–Cookie

1. æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® https://www.futunn.com/paper-trade
2. ç™»å½•ä½ çš„å¯Œé€”è´¦æˆ·
3. æŒ‰ `F12` æ‰“å¼€å¼€å‘è€…å·¥å…·
4. åˆ‡æ¢åˆ° `Network`ï¼ˆç½‘ç»œï¼‰æ ‡ç­¾
5. åˆ·æ–°é¡µé¢
6. ç‚¹å‡»ä»»æ„è¯·æ±‚ï¼Œåœ¨è¯·æ±‚å¤´ä¸­æ‰¾åˆ° `Cookie` å­—æ®µ
7. å¤åˆ¶å®Œæ•´çš„Cookieå€¼

**Cookieç¤ºä¾‹**ï¼ˆå®é™…ä¼šå¾ˆé•¿ï¼‰ï¼š
```
_ga=GA1.2.xxx; _gid=GA1.2.xxx; session_id=xxx; ...
```

### æ­¥éª¤3: é…ç½®ç¯å¢ƒå˜é‡

1. å¤åˆ¶ `.env.example` ä¸º `.env`ï¼š
```bash
copy .env.example .env
```

2. ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„Cookieï¼š
```env
FUTU_COOKIE=ä½ çš„Cookieå€¼
ACCOUNT_ID=16992013
API_HOST=0.0.0.0
API_PORT=8000
```

**æ³¨æ„**: è´¦æˆ·IDå¯ä»¥å…ˆç•™ç©ºï¼Œå¯åŠ¨åé€šè¿‡ `/api/accounts` æ¥å£è·å–

### æ­¥éª¤4: å¯åŠ¨æœåŠ¡

åŒå‡»è¿è¡Œ `start.bat` æˆ–æ‰‹åŠ¨æ‰§è¡Œï¼š

```bash
python main.py
```

çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºè¡¨ç¤ºå¯åŠ¨æˆåŠŸï¼š
```
ğŸš€ å¯Œé€”æ¨¡æ‹Ÿäº¤æ˜“APIæœåŠ¡å¯åŠ¨ä¸­...
ğŸ“ æœåŠ¡åœ°å€: http://0.0.0.0:8000
ğŸ“– APIæ–‡æ¡£: http://0.0.0.0:8000/docs
INFO:     Uvicorn running on http://0.0.0.0:8000
```

### æ­¥éª¤5: æµ‹è¯•API

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š
- **äº¤äº’å¼æ–‡æ¡£**: http://localhost:8000/docs
- **APIæ–‡æ¡£**: http://localhost:8000/redoc

æˆ–è¿è¡Œæµ‹è¯•è„šæœ¬ï¼š
```bash
python test_api.py
```

## ğŸ¯ ç¬¬ä¸€ç¬”äº¤æ˜“

### æ–¹å¼1: ä½¿ç”¨äº¤äº’å¼æ–‡æ¡£

1. è®¿é—® http://localhost:8000/docs
2. æ‰¾åˆ° `POST /api/trade/buy` æ¥å£
3. ç‚¹å‡» "Try it out"
4. å¡«å…¥å‚æ•°ï¼š
   - stock_code: `NVDA`
   - market_type: `US`
   - quantity: `10`
   - price: `202.50`
   - order_type: `LIMIT`
5. ç‚¹å‡» "Execute"

### æ–¹å¼2: ä½¿ç”¨cURL

```bash
curl -X POST "http://localhost:8000/api/trade/buy?stock_code=NVDA&market_type=US&quantity=10&price=202.50&order_type=LIMIT"
```

### æ–¹å¼3: ä½¿ç”¨Python

```python
import requests

response = requests.post(
    "http://localhost:8000/api/trade/buy",
    params={
        "stock_code": "NVDA",
        "market_type": "US",
        "quantity": 10,
        "price": 202.50,
        "order_type": "LIMIT"
    }
)

print(response.json())
```

## ğŸ“š å¸¸ç”¨æ“ä½œ

### æŸ¥è¯¢è´¦æˆ·ä¿¡æ¯
```bash
curl http://localhost:8000/api/account/info
```

### æŸ¥è¯¢æŒä»“
```bash
curl http://localhost:8000/api/positions
```

### æœç´¢è‚¡ç¥¨
```bash
curl -X POST http://localhost:8000/api/stock/search \
  -H "Content-Type: application/json" \
  -d '{"keyword":"NVDA","market_type":"US"}'
```

### ä¹°å…¥è‚¡ç¥¨
```bash
# é™ä»·å•
curl -X POST "http://localhost:8000/api/trade/buy?stock_code=NVDA&market_type=US&quantity=10&price=202.50&order_type=LIMIT"

# å¸‚ä»·å•
curl -X POST "http://localhost:8000/api/trade/buy?stock_code=NVDA&market_type=US&quantity=10&order_type=MARKET"
```

### å–å‡ºè‚¡ç¥¨
```bash
curl -X POST "http://localhost:8000/api/trade/sell?stock_code=NVDA&market_type=US&quantity=10&price=205.00&order_type=LIMIT"
```

## ğŸŒ å¤šå¸‚åœºäº¤æ˜“ç¤ºä¾‹

### ç¾è‚¡äº¤æ˜“
```python
# ä¹°å…¥è‹±ä¼Ÿè¾¾
requests.post("http://localhost:8000/api/trade/buy", params={
    "stock_code": "NVDA",
    "market_type": "US",
    "quantity": 10,
    "price": 202.50,
    "order_type": "LIMIT"
})
```

### æ¸¯è‚¡äº¤æ˜“
```python
# ä¹°å…¥è…¾è®¯
requests.post("http://localhost:8000/api/trade/buy", params={
    "stock_code": "00700",
    "market_type": "HK",
    "quantity": 100,
    "price": 380.00,
    "order_type": "LIMIT"
})
```

### Aè‚¡äº¤æ˜“
```python
# ä¹°å…¥èŒ…å°
requests.post("http://localhost:8000/api/trade/buy", params={
    "stock_code": "600519",
    "market_type": "CN",
    "quantity": 100,
    "price": 1650.00,
    "order_type": "LIMIT"
})
```

## ğŸ”§ å¸¸è§é—®é¢˜

### Q1: Cookieå¦‚ä½•è·å–ï¼Ÿ
**A**: 
1. ç™»å½• https://www.futunn.com/paper-trade
2. F12æ‰“å¼€å¼€å‘è€…å·¥å…·
3. Networkæ ‡ç­¾ä¸­æ‰¾åˆ°Cookie
4. å¤åˆ¶å®Œæ•´çš„Cookieå€¼åˆ°.envæ–‡ä»¶

### Q2: å¦‚ä½•è·å–è´¦æˆ·IDï¼Ÿ
**A**: 
1. é…ç½®å¥½Cookieåå¯åŠ¨æœåŠ¡
2. è®¿é—® http://localhost:8000/api/accounts
3. è¿”å›çš„åˆ—è¡¨å°±æ˜¯ä½ çš„è´¦æˆ·ID

### Q3: Cookieè¿‡æœŸæ€ä¹ˆåŠï¼Ÿ
**A**: 
é‡æ–°ç™»å½•å¯Œé€”ç½‘é¡µç‰ˆï¼Œè·å–æ–°çš„Cookieï¼Œæ›´æ–°.envæ–‡ä»¶ï¼Œé‡å¯æœåŠ¡

### Q4: æ”¯æŒå“ªäº›å¸‚åœºï¼Ÿ
**A**: 
- ç¾è‚¡ (US): NVDA, AAPL, TSLAç­‰
- æ¸¯è‚¡ (HK): 00700, 09988ç­‰
- Aè‚¡ (CN): 600519, 000001ç­‰

### Q5: é™ä»·å•å’Œå¸‚ä»·å•çš„åŒºåˆ«ï¼Ÿ
**A**: 
- **é™ä»·å•(LIMIT)**: æŒ‡å®šä»·æ ¼ï¼Œå¯èƒ½ä¸ä¼šç«‹å³æˆäº¤
- **å¸‚ä»·å•(MARKET)**: æŒ‰å½“å‰å¸‚ä»·ç«‹å³æˆäº¤

### Q6: å¦‚ä½•æŸ¥çœ‹APIæ–‡æ¡£ï¼Ÿ
**A**: 
å¯åŠ¨æœåŠ¡åè®¿é—® http://localhost:8000/docs

### Q7: å¯ä»¥ç”¨äºå®ç›˜äº¤æ˜“å—ï¼Ÿ
**A**: 
ä¸å¯ä»¥ï¼Œæœ¬æœåŠ¡ä»…æ”¯æŒæ¨¡æ‹Ÿäº¤æ˜“ã€‚å®ç›˜è¯·ä½¿ç”¨å¯Œé€”å®˜æ–¹OpenAPIã€‚

### Q8: æœåŠ¡å¯åŠ¨å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
**A**: 
1. æ£€æŸ¥Pythonç‰ˆæœ¬ï¼ˆéœ€è¦3.8+ï¼‰
2. æ£€æŸ¥ä¾èµ–æ˜¯å¦å®‰è£…å®Œæ•´
3. æ£€æŸ¥.envæ–‡ä»¶æ˜¯å¦é…ç½®æ­£ç¡®
4. æ£€æŸ¥8000ç«¯å£æ˜¯å¦è¢«å ç”¨

### Q9: è¯·æ±‚è¿”å›401é”™è¯¯ï¼Ÿ
**A**: 
Cookieæ— æ•ˆæˆ–è¿‡æœŸï¼Œéœ€è¦é‡æ–°è·å–Cookie

### Q10: å¦‚ä½•åœæ­¢æœåŠ¡ï¼Ÿ
**A**: 
åœ¨å‘½ä»¤è¡Œçª—å£æŒ‰ `Ctrl+C`

## ğŸ“– æ›´å¤šèµ„æº

- **å®Œæ•´APIæ–‡æ¡£**: æŸ¥çœ‹ `APIæ¥å£è¯´æ˜.md`
- **é¡¹ç›®è¯´æ˜**: æŸ¥çœ‹ `README.md`
- **ä½¿ç”¨ç¤ºä¾‹**: è¿è¡Œ `example_usage.py`
- **APIæµ‹è¯•**: è¿è¡Œ `test_api.py`

## ğŸ’¡ æœ€ä½³å®è·µ

1. **æµ‹è¯•å…ˆè¡Œ**: å…ˆç”¨å°é¢æµ‹è¯•ï¼Œç¡®è®¤åŠŸèƒ½æ­£å¸¸
2. **ä»·æ ¼ç¡®è®¤**: ä¸‹å•å‰å…ˆæŸ¥è¯¢å®æ—¶è¡Œæƒ…
3. **æŒä»“ç®¡ç†**: å®šæœŸæŸ¥è¯¢æŒä»“å’Œè´¦æˆ·ä¿¡æ¯
4. **é”™è¯¯å¤„ç†**: æ³¨æ„å¤„ç†APIè¿”å›çš„é”™è¯¯ä¿¡æ¯
5. **é¢‘ç‡æ§åˆ¶**: é¿å…è¿‡äºé¢‘ç¹çš„è¯·æ±‚

## ğŸ‰ å¼€å§‹äº¤æ˜“

ç°åœ¨ä½ å·²ç»å‡†å¤‡å¥½äº†ï¼è®¿é—® http://localhost:8000/docs å¼€å§‹ä½ çš„æ¨¡æ‹Ÿäº¤æ˜“ä¹‹æ—…å§ï¼

è®°ä½ï¼šè¿™æ˜¯æ¨¡æ‹Ÿäº¤æ˜“ï¼Œå¯ä»¥æ”¾å¿ƒå°è¯•å„ç§ç­–ç•¥ï¼Œä½†ä¸è¦å°†æ¨¡æ‹Ÿç»“æœç›´æ¥åº”ç”¨äºå®ç›˜äº¤æ˜“ã€‚

ç¥äº¤æ˜“æ„‰å¿«ï¼ğŸ“ˆ
