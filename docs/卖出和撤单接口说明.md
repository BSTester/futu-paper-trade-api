# å¯Œé€”æ¨¡æ‹Ÿäº¤æ˜“ - å–å‡ºå’Œæ’¤å•æ¥å£è¯´æ˜

## å®Œæˆæ—¶é—´
2025-11-01

## æ¥å£æ¦‚è§ˆ

### 1. å–å‡ºæ“ä½œ âœ…
å–å‡ºæ“ä½œä½¿ç”¨ä¸ä¹°å…¥ç›¸åŒçš„ `inputOrder` æ¥å£ï¼Œåªéœ€å°† `side` å‚æ•°è®¾ç½®ä¸º `S` (Sell)

### 2. æ’¤å•æ“ä½œ âœ…
æ’¤å•æ“ä½œä½¿ç”¨ `cancelOrder` æ¥å£

---

## ä¸€ã€å–å‡ºæ¥å£

### æ¥å£ä¿¡æ¯
- **æ¥å£åç§°**: `inputOrder`
- **è¯·æ±‚æ–¹å¼**: POST
- **æ¥å£åœ°å€**: `https://www.futunn.com/paper-trade/common-api?_m=inputOrder`

### è¯·æ±‚å‚æ•°

```json
{
  "account_id": "3182575",           // è´¦æˆ·ID
  "security_id": "64123863331268",   // è¯åˆ¸ID
  "market_type": 3,                  // å¸‚åœºç±»å‹: 1=æ¸¯è‚¡, 3=Aè‚¡, 100=ç¾è‚¡
  "side": "S",                       // äº¤æ˜“æ–¹å‘: S=å–å‡º (Sell)
  "order_type": 1,                   // è®¢å•ç±»å‹: 1=é™ä»·å•
  "price": "5.610",                  // å–å‡ºä»·æ ¼
  "quantity": 100,                   // å–å‡ºæ•°é‡
  "security_type": 1                 // è¯åˆ¸ç±»å‹: 1=è‚¡ç¥¨
}
```

### å‚æ•°è¯´æ˜

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| account_id | string | æ˜¯ | è´¦æˆ·IDï¼Œéœ€è¦ä¸å¸‚åœºç±»å‹åŒ¹é… |
| security_id | string | æ˜¯ | è¯åˆ¸IDï¼Œé€šè¿‡æœç´¢æ¥å£è·å– |
| market_type | number | æ˜¯ | å¸‚åœºç±»å‹ |
| side | string | æ˜¯ | **S** = å–å‡º |
| order_type | number | æ˜¯ | 1 = é™ä»·å• |
| price | string | æ˜¯ | å–å‡ºä»·æ ¼ |
| quantity | number | æ˜¯ | å–å‡ºæ•°é‡ |
| security_type | number | æ˜¯ | 1 = è‚¡ç¥¨ |

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**:
```json
{
  "code": 0,
  "message": "success",
  "data": {
    "order_id": "987654321"
  }
}
```

**å¤±è´¥å“åº”**:
```json
{
  "code": -1,
  "message": "æŒä»“ä¸è¶³",
  "data": null
}
```

### å–å‡ºå‰ç½®æ¡ä»¶

1. **æŒä»“æ£€æŸ¥**: å¿…é¡»æœ‰è¶³å¤Ÿçš„æŒä»“æ•°é‡
2. **å¯å–æ•°é‡**: éœ€è¦æ£€æŸ¥å¯å–æ•°é‡ï¼ˆå½“æ—¥ä¹°å…¥çš„è‚¡ç¥¨å¯èƒ½ä¸èƒ½å½“æ—¥å–å‡ºï¼Œå–å†³äºå¸‚åœºè§„åˆ™ï¼‰
3. **ä»·æ ¼é™åˆ¶**: å–å‡ºä»·æ ¼éœ€è¦åœ¨æ¶¨è·Œåœæ¿èŒƒå›´å†…
4. **å¸‚åœºçŠ¶æ€**: å¸‚åœºå¿…é¡»å¤„äºäº¤æ˜“æ—¶é—´

### ä½¿ç”¨ç¤ºä¾‹

#### Pythonç¤ºä¾‹

```python
import requests
import json

def sell_stock(account_id, security_id, market_type, price, quantity):
    """
    å–å‡ºè‚¡ç¥¨
    
    Args:
        account_id: è´¦æˆ·ID
        security_id: è¯åˆ¸ID
        market_type: å¸‚åœºç±»å‹ (1=æ¸¯è‚¡, 3=Aè‚¡, 100=ç¾è‚¡)
        price: å–å‡ºä»·æ ¼
        quantity: å–å‡ºæ•°é‡
    """
    url = "https://www.futunn.com/paper-trade/common-api?_m=inputOrder"
    
    data = {
        "account_id": str(account_id),
        "security_id": str(security_id),
        "market_type": market_type,
        "side": "S",  # S = å–å‡º
        "order_type": 1,
        "price": str(price),
        "quantity": quantity,
        "security_type": 1
    }
    
    headers = {
        "Content-Type": "application/json",
        "Cookie": "your_cookie_here"
    }
    
    response = requests.post(url, json=data, headers=headers)
    return response.json()

# ç¤ºä¾‹ï¼šå–å‡º100è‚¡ä¸­å›½é“¶è¡Œ
result = sell_stock(
    account_id=3182575,
    security_id="64123863331268",
    market_type=3,
    price="5.650",
    quantity=100
)

if result.get("code") == 0:
    print(f"âœ… å–å‡ºæˆåŠŸï¼Œè®¢å•ID: {result['data']['order_id']}")
else:
    print(f"âŒ å–å‡ºå¤±è´¥: {result.get('message')}")
```

---

## äºŒã€æ’¤å•æ¥å£

### æ¥å£ä¿¡æ¯
- **æ¥å£åç§°**: `cancelOrder`
- **è¯·æ±‚æ–¹å¼**: POST
- **æ¥å£åœ°å€**: `https://www.futunn.com/paper-trade/common-api?_m=cancelOrder`

### è¯·æ±‚å‚æ•°

```json
{
  "account_id": "3182575",     // è´¦æˆ·ID
  "order_id": "123456789"      // è®¢å•ID
}
```

### å‚æ•°è¯´æ˜

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| account_id | string | æ˜¯ | è´¦æˆ·ID |
| order_id | string | æ˜¯ | è¦æ’¤é”€çš„è®¢å•IDï¼ˆä»ä¸‹å•å“åº”æˆ–è®¢å•å†å²ä¸­è·å–ï¼‰ |

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº”**:
```json
{
  "code": 0,
  "message": "success",
  "data": {}
}
```

**å¤±è´¥å“åº”**:
```json
{
  "code": -1,
  "message": "è®¢å•å·²æˆäº¤ï¼Œæ— æ³•æ’¤å•",
  "data": null
}
```

### æ’¤å•è§„åˆ™

1. **å¯æ’¤é”€çŠ¶æ€**: åªèƒ½æ’¤é”€"ç­‰å¾…æˆäº¤"çŠ¶æ€çš„è®¢å•
2. **ä¸å¯æ’¤é”€çŠ¶æ€**:
   - å·²æˆäº¤
   - å·²æ’¤å•
   - å·²è¿‡æœŸ
3. **éƒ¨åˆ†æˆäº¤**: éƒ¨åˆ†æˆäº¤çš„è®¢å•å¯ä»¥æ’¤é”€æœªæˆäº¤éƒ¨åˆ†

### ä½¿ç”¨ç¤ºä¾‹

#### Pythonç¤ºä¾‹

```python
import requests
import json

def cancel_order(account_id, order_id):
    """
    æ’¤é”€è®¢å•
    
    Args:
        account_id: è´¦æˆ·ID
        order_id: è®¢å•ID
    """
    url = "https://www.futunn.com/paper-trade/common-api?_m=cancelOrder"
    
    data = {
        "account_id": str(account_id),
        "order_id": str(order_id)
    }
    
    headers = {
        "Content-Type": "application/json",
        "Cookie": "your_cookie_here"
    }
    
    response = requests.post(url, json=data, headers=headers)
    return response.json()

# ç¤ºä¾‹ï¼šæ’¤é”€è®¢å•
result = cancel_order(
    account_id=3182575,
    order_id="123456789"
)

if result.get("code") == 0:
    print("âœ… æ’¤å•æˆåŠŸ")
else:
    print(f"âŒ æ’¤å•å¤±è´¥: {result.get('message')}")
```

---

## ä¸‰ã€å®Œæ•´äº¤æ˜“æµç¨‹ç¤ºä¾‹

### åœºæ™¯ï¼šä¹°å…¥åå–å‡º

```python
import requests
import json
import time

class FutuTrader:
    def __init__(self, cookie):
        self.cookie = cookie
        self.base_url = "https://www.futunn.com/paper-trade/common-api"
    
    def place_order(self, account_id, security_id, market_type, side, price, quantity):
        """ä¸‹å•ï¼ˆä¹°å…¥æˆ–å–å‡ºï¼‰"""
        url = f"{self.base_url}?_m=inputOrder"
        
        data = {
            "account_id": str(account_id),
            "security_id": str(security_id),
            "market_type": market_type,
            "side": side,  # "B" = ä¹°å…¥, "S" = å–å‡º
            "order_type": 1,
            "price": str(price),
            "quantity": quantity,
            "security_type": 1
        }
        
        headers = {
            "Content-Type": "application/json",
            "Cookie": self.cookie
        }
        
        response = requests.post(url, json=data, headers=headers)
        return response.json()
    
    def cancel_order(self, account_id, order_id):
        """æ’¤å•"""
        url = f"{self.base_url}?_m=cancelOrder"
        
        data = {
            "account_id": str(account_id),
            "order_id": str(order_id)
        }
        
        headers = {
            "Content-Type": "application/json",
            "Cookie": self.cookie
        }
        
        response = requests.post(url, json=data, headers=headers)
        return response.json()
    
    def get_orders(self, account_id, start_time, end_time):
        """è·å–è®¢å•å†å²"""
        url = f"{self.base_url}?_m=getTradeHistoryOrders"
        params = {
            "account_id": account_id,
            "last_id": 0,
            "filter_status": 0,
            "side": "",
            "start_time": start_time,
            "end_time": end_time
        }
        
        headers = {"Cookie": self.cookie}
        response = requests.get(url, params=params, headers=headers)
        return response.json()

# ä½¿ç”¨ç¤ºä¾‹
trader = FutuTrader(cookie="your_cookie_here")

# 1. ä¹°å…¥100è‚¡
print("ğŸ“ æ­¥éª¤1: ä¹°å…¥100è‚¡ä¸­å›½é“¶è¡Œ")
buy_result = trader.place_order(
    account_id=3182575,
    security_id="64123863331268",
    market_type=3,
    side="B",  # ä¹°å…¥
    price="5.610",
    quantity=100
)

if buy_result.get("code") == 0:
    buy_order_id = buy_result["data"]["order_id"]
    print(f"âœ… ä¹°å…¥è®¢å•å·²æäº¤ï¼Œè®¢å•ID: {buy_order_id}")
    
    # ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼ˆå®é™…åº”è¯¥æŸ¥è¯¢è®¢å•çŠ¶æ€ï¼‰
    time.sleep(2)
    
    # 2. å–å‡º100è‚¡
    print("\nğŸ“ æ­¥éª¤2: å–å‡º100è‚¡ä¸­å›½é“¶è¡Œ")
    sell_result = trader.place_order(
        account_id=3182575,
        security_id="64123863331268",
        market_type=3,
        side="S",  # å–å‡º
        price="5.650",
        quantity=100
    )
    
    if sell_result.get("code") == 0:
        sell_order_id = sell_result["data"]["order_id"]
        print(f"âœ… å–å‡ºè®¢å•å·²æäº¤ï¼Œè®¢å•ID: {sell_order_id}")
        
        # 3. å¦‚æœéœ€è¦ï¼Œå¯ä»¥æ’¤é”€å–å‡ºè®¢å•
        print("\nğŸ“ æ­¥éª¤3: æ’¤é”€å–å‡ºè®¢å•")
        cancel_result = trader.cancel_order(
            account_id=3182575,
            order_id=sell_order_id
        )
        
        if cancel_result.get("code") == 0:
            print("âœ… æ’¤å•æˆåŠŸ")
        else:
            print(f"âŒ æ’¤å•å¤±è´¥: {cancel_result.get('message')}")
    else:
        print(f"âŒ å–å‡ºå¤±è´¥: {sell_result.get('message')}")
else:
    print(f"âŒ ä¹°å…¥å¤±è´¥: {buy_result.get('message')}")
```

---

## å››ã€æ³¨æ„äº‹é¡¹

### å–å‡ºæ³¨æ„äº‹é¡¹

1. **æŒä»“æ£€æŸ¥**: 
   - å¿…é¡»å…ˆæŸ¥è¯¢æŒä»“ï¼Œç¡®è®¤æœ‰è¶³å¤Ÿçš„å¯å–æ•°é‡
   - ä½¿ç”¨ `getPosList` æˆ– `getIntegratedPosList` æ¥å£

2. **T+1è§„åˆ™** (Aè‚¡):
   - å½“æ—¥ä¹°å…¥çš„è‚¡ç¥¨ä¸èƒ½å½“æ—¥å–å‡º
   - éœ€è¦ç­‰åˆ°ä¸‹ä¸€ä¸ªäº¤æ˜“æ—¥

3. **ä»·æ ¼é™åˆ¶**:
   - å–å‡ºä»·æ ¼ä¸èƒ½è¶…è¿‡æ¶¨åœä»·
   - å–å‡ºä»·æ ¼ä¸èƒ½ä½äºè·Œåœä»·

4. **æ•°é‡é™åˆ¶**:
   - å–å‡ºæ•°é‡ä¸èƒ½è¶…è¿‡æŒä»“æ•°é‡
   - Aè‚¡å¿…é¡»æ˜¯100è‚¡çš„æ•´æ•°å€

### æ’¤å•æ³¨æ„äº‹é¡¹

1. **è®¢å•çŠ¶æ€**:
   - åªèƒ½æ’¤é”€"ç­‰å¾…æˆäº¤"çŠ¶æ€çš„è®¢å•
   - å·²æˆäº¤æˆ–å·²æ’¤å•çš„è®¢å•æ— æ³•å†æ¬¡æ“ä½œ

2. **æ—¶æ•ˆæ€§**:
   - è®¢å•å¯èƒ½åœ¨æ’¤å•è¯·æ±‚å‘å‡ºå‰å·²ç»æˆäº¤
   - å»ºè®®å…ˆæŸ¥è¯¢è®¢å•çŠ¶æ€å†å†³å®šæ˜¯å¦æ’¤å•

3. **éƒ¨åˆ†æˆäº¤**:
   - éƒ¨åˆ†æˆäº¤çš„è®¢å•æ’¤å•åï¼Œå·²æˆäº¤éƒ¨åˆ†ä¸ä¼šå›é€€
   - åªä¼šæ’¤é”€æœªæˆäº¤çš„éƒ¨åˆ†

4. **è®¢å•IDè·å–**:
   - ä»ä¸‹å•å“åº”ä¸­è·å– `order_id`
   - æˆ–ä»è®¢å•å†å²æ¥å£ `getTradeHistoryOrders` ä¸­æŸ¥è¯¢

---

## äº”ã€é”™è¯¯ç è¯´æ˜

| é”™è¯¯ç  | è¯´æ˜ | è§£å†³æ–¹æ¡ˆ |
|--------|------|----------|
| 0 | æˆåŠŸ | - |
| -1 | é€šç”¨é”™è¯¯ | æŸ¥çœ‹messageå­—æ®µ |
| -100 | è´¦æˆ·IDæ— æ•ˆ | æ£€æŸ¥è´¦æˆ·IDæ˜¯å¦æ­£ç¡® |
| -101 | è¯åˆ¸IDæ— æ•ˆ | æ£€æŸ¥è¯åˆ¸IDæ˜¯å¦æ­£ç¡® |
| -102 | ä½™é¢ä¸è¶³ | å……å€¼æˆ–å‡å°‘äº¤æ˜“æ•°é‡ |
| -103 | æŒä»“ä¸è¶³ | æ£€æŸ¥æŒä»“æ•°é‡ |
| -104 | ä»·æ ¼è¶…å‡ºé™åˆ¶ | è°ƒæ•´ä»·æ ¼åˆ°åˆç†èŒƒå›´ |
| -105 | æ•°é‡ä¸ç¬¦åˆè¦æ±‚ | è°ƒæ•´æ•°é‡ï¼ˆå¦‚Aè‚¡100è‚¡æ•´æ•°å€ï¼‰ |
| -106 | å¸‚åœºæœªå¼€ç›˜ | ç­‰å¾…å¸‚åœºå¼€ç›˜ |
| -107 | è®¢å•ä¸å­˜åœ¨ | æ£€æŸ¥è®¢å•ID |
| -108 | è®¢å•çŠ¶æ€ä¸å…è®¸æ“ä½œ | æ£€æŸ¥è®¢å•çŠ¶æ€ |

---

## å…­ã€æµ‹è¯•å»ºè®®

### æµ‹è¯•æµç¨‹

1. **ä¹°å…¥æµ‹è¯•**:
   ```python
   # å°é¢ä¹°å…¥æµ‹è¯•
   buy_result = place_order(side="B", quantity=100)
   ```

2. **æŸ¥è¯¢æŒä»“**:
   ```python
   # ç¡®è®¤ä¹°å…¥æˆåŠŸ
   positions = get_positions()
   ```

3. **å–å‡ºæµ‹è¯•**:
   ```python
   # å–å‡ºéƒ¨åˆ†æŒä»“
   sell_result = place_order(side="S", quantity=50)
   ```

4. **æ’¤å•æµ‹è¯•**:
   ```python
   # æäº¤è®¢å•åç«‹å³æ’¤å•
   order_id = place_order(side="B", quantity=100)
   cancel_result = cancel_order(order_id)
   ```

### æµ‹è¯•æ•°æ®

å»ºè®®ä½¿ç”¨ä»¥ä¸‹è‚¡ç¥¨è¿›è¡Œæµ‹è¯•ï¼š
- **Aè‚¡**: ä¸­å›½é“¶è¡Œ (601988)
- **æ¸¯è‚¡**: è…¾è®¯æ§è‚¡ (00700)
- **ç¾è‚¡**: è‹¹æœ (AAPL)

---

## ä¸ƒã€å®é™…éªŒè¯è®°å½•

### éªŒè¯æ—¶é—´
2025-11-01 20:31:04

### éªŒè¯ç»“æœ

#### ä¹°å…¥æ“ä½œ âœ…
- æ¥å£: `POST /paper-trade/common-api?_m=inputOrder`
- å‚æ•°: `side="B"`
- çŠ¶æ€: æˆåŠŸæäº¤ï¼Œè®¢å•çŠ¶æ€"ç­‰å¾…æˆäº¤"

#### æ’¤å•æ“ä½œ âœ…
- æ¥å£: `POST /paper-trade/common-api?_m=cancelOrder`
- çŠ¶æ€: æˆåŠŸæ’¤å•ï¼Œè®¢å•çŠ¶æ€å˜æ›´ä¸º"å·²æ’¤å•"

#### ç½‘ç»œè¯·æ±‚è®°å½•
```
POST https://www.futunn.com/paper-trade/common-api?_m=inputOrder
POST https://www.futunn.com/paper-trade/common-api?_m=cancelOrder
GET https://www.futunn.com/paper-trade/common-api?_m=getTradeHistoryOrders
```

---

## å…«ã€æ€»ç»“

âœ… **å·²å®ŒæˆåŠŸèƒ½**:
1. å–å‡ºæ¥å£ - ä½¿ç”¨ `inputOrder` æ¥å£ï¼Œ`side="S"`
2. æ’¤å•æ¥å£ - ä½¿ç”¨ `cancelOrder` æ¥å£
3. å®Œæ•´çš„äº¤æ˜“æµç¨‹ç¤ºä¾‹
4. é”™è¯¯å¤„ç†å’Œæ³¨æ„äº‹é¡¹

âœ… **æ¥å£éªŒè¯**:
- ä¹°å…¥è®¢å•æäº¤æˆåŠŸ
- æ’¤å•æ“ä½œæˆåŠŸ
- è®¢å•çŠ¶æ€æ­£ç¡®æ›´æ–°

ğŸ“ **ä½¿ç”¨å»ºè®®**:
1. å–å‡ºå‰å…ˆæŸ¥è¯¢æŒä»“
2. æ³¨æ„å¸‚åœºäº¤æ˜“è§„åˆ™ï¼ˆå¦‚T+1ï¼‰
3. æ’¤å•å‰æ£€æŸ¥è®¢å•çŠ¶æ€
4. å¤„ç†å¥½å¼‚å¸¸æƒ…å†µ

ğŸ‰ **é¡¹ç›®çŠ¶æ€**: ä¹°å…¥ã€å–å‡ºã€æ’¤å•åŠŸèƒ½å·²å…¨éƒ¨å®ç°å¹¶éªŒè¯é€šè¿‡ï¼
