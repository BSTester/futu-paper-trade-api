# 部署平台对比指南

本文档帮助你选择最适合的部署平台。

## 快速对比表

| 特性 | Leapcell | Render | Railway | Docker 本地 |
|------|----------|--------|---------|-------------|
| **价格** | 免费/付费 | 免费/付费 | 免费/付费 | 免费 |
| **一键部署** | ✅ | ✅ | ✅ | ❌ |
| **自动 HTTPS** | ✅ | ✅ | ✅ | ❌ |
| **自动部署** | ✅ | ✅ | ✅ | ❌ |
| **休眠限制** | ❌ 不休眠 | ⚠️ 15分钟无请求休眠 | ⚠️ 取决于套餐 | ❌ 不休眠 |
| **唤醒时间** | - | ~30秒 | ~10秒 | - |
| **配置难度** | ⭐ 简单 | ⭐ 简单 | ⭐⭐ 中等 | ⭐⭐⭐ 复杂 |
| **构建速度** | 快 | 中等 | 快 | 最快 |
| **日志查看** | ✅ 实时 | ✅ 实时 | ✅ 实时 | ✅ 本地 |
| **自定义域名** | ✅ | ✅ | ✅ | ⚠️ 需配置 |
| **数据库支持** | ✅ | ✅ | ✅ | ✅ |
| **环境变量** | ✅ | ✅ | ✅ | ✅ |
| **团队协作** | ✅ | ✅ | ✅ | ❌ |

## 详细对比

### 1. Leapcell

**官网**: https://leapcell.io/

#### 优势
- ✅ 不会自动休眠（即使免费套餐）
- ✅ 配置简单，自动检测 `leapcell.json`
- ✅ 响应速度快
- ✅ 适合生产环境
- ✅ 国内访问速度较好

#### 劣势
- ⚠️ 相对较新的平台
- ⚠️ 社区资源较少

#### 适用场景
- 🎯 **生产环境**（需要稳定运行）
- 🎯 **商业项目**（不能接受休眠）
- 🎯 **高频使用**（经常有请求）

#### 成本
- 免费套餐：有限额度
- 付费套餐：按使用量计费

**推荐指数**: ⭐⭐⭐⭐⭐

---

### 2. Render

**官网**: https://render.com/

#### 优势
- ✅ 完全免费（750小时/月）
- ✅ 自动 HTTPS 证书
- ✅ 配置简单，自动检测 `render.yaml`
- ✅ 文档完善，社区活跃
- ✅ 界面友好

#### 劣势
- ⚠️ 免费套餐15分钟无请求后休眠
- ⚠️ 唤醒需要约30秒
- ⚠️ 国内访问可能较慢

#### 适用场景
- 🎯 **个人项目**（预算有限）
- 🎯 **测试环境**（不需要24/7运行）
- 🎯 **低频使用**（可以接受唤醒时间）
- 🎯 **学习和实验**

#### 成本
- 免费套餐：750小时/月，100GB带宽
- Starter: $7/月（不休眠）
- Standard: $25/月（更好性能）

#### 保活方案
使用 UptimeRobot 或 Cron-job.org 每5-10分钟访问一次 `/health` 端点，避免休眠。

**推荐指数**: ⭐⭐⭐⭐

---

### 3. Railway

**官网**: https://railway.app/

#### 优势
- ✅ 功能强大，配置灵活
- ✅ 支持多种服务（数据库、Redis等）
- ✅ 免费额度较高（$5/月）
- ✅ 构建速度快
- ✅ 支持私有网络

#### 劣势
- ⚠️ 配置相对复杂
- ⚠️ 免费额度用完后需要付费
- ⚠️ 国内访问可能较慢

#### 适用场景
- 🎯 **全栈应用**（需要数据库等服务）
- 🎯 **开发环境**（需要快速迭代）
- 🎯 **中小型项目**（需要灵活配置）

#### 成本
- 免费额度：$5/月（约500小时）
- 付费：按使用量计费

**推荐指数**: ⭐⭐⭐⭐

---

### 4. Docker 本地部署

#### 优势
- ✅ 完全免费
- ✅ 完全控制
- ✅ 不受平台限制
- ✅ 性能最好
- ✅ 数据隐私

#### 劣势
- ⚠️ 需要自己管理服务器
- ⚠️ 需要配置 HTTPS
- ⚠️ 需要处理安全问题
- ⚠️ 需要监控和维护

#### 适用场景
- 🎯 **自建服务器**（有服务器资源）
- 🎯 **内网部署**（不需要公网访问）
- 🎯 **高安全要求**（数据不能外传）
- 🎯 **学习 Docker**

#### 成本
- 服务器成本（VPS、云服务器等）
- 域名成本（如需公网访问）
- SSL证书成本（可用免费的 Let's Encrypt）

**推荐指数**: ⭐⭐⭐

---

## 选择建议

### 按使用场景选择

#### 1. 个人学习和测试
**推荐**: Render（免费）
- 完全免费
- 配置简单
- 可以接受休眠

**配置**:
- 使用 UptimeRobot 保活
- 设置 API Key 保护接口

---

#### 2. 个人项目（低频使用）
**推荐**: Render（免费）+ 保活服务
- 成本最低
- 满足基本需求
- 偶尔使用可以接受唤醒时间

**配置**:
- UptimeRobot 每10分钟访问一次
- 设置强 API Key

---

#### 3. 个人项目（高频使用）
**推荐**: Leapcell 或 Render Starter
- Leapcell: 免费套餐不休眠
- Render Starter: $7/月，不休眠

**配置**:
- 设置自动部署
- 配置监控告警

---

#### 4. 小型商业项目
**推荐**: Leapcell 或 Railway
- 稳定性好
- 不会休眠
- 支持扩展

**配置**:
- 使用付费套餐
- 配置自定义域名
- 设置备份策略

---

#### 5. 企业级应用
**推荐**: 自建 Docker 或云服务
- 完全控制
- 高性能
- 高安全性

**配置**:
- 使用 Kubernetes
- 配置负载均衡
- 设置完善的监控

---

#### 6. 开发和测试环境
**推荐**: 本地 Docker
- 快速启动
- 完全控制
- 便于调试

**配置**:
- 使用 docker-compose
- 挂载本地代码
- 实时热重载

---

## 成本对比

### 月成本估算（假设24/7运行）

| 平台 | 免费套餐 | 基础套餐 | 标准套餐 |
|------|----------|----------|----------|
| **Leapcell** | 有限额度 | 按量计费 | 按量计费 |
| **Render** | 750小时（休眠） | $7/月 | $25/月 |
| **Railway** | $5额度 | ~$10/月 | ~$20/月 |
| **VPS** | - | $5-10/月 | $20-50/月 |

### 成本优化建议

1. **开发阶段**: 使用免费套餐
2. **测试阶段**: 使用免费套餐 + 保活
3. **生产阶段**: 根据流量选择合适套餐
4. **高流量**: 考虑自建或云服务

---

## 迁移建议

### 从 Render 迁移到 Leapcell

**原因**: 需要更稳定的服务（不休眠）

**步骤**:
1. 在 Leapcell 创建新应用
2. 配置相同的环境变量
3. 测试新部署
4. 更新 DNS 或 API 地址
5. 停用 Render 服务

**注意**: 两个平台都支持自动部署，迁移很简单

---

### 从云平台迁移到自建

**原因**: 成本优化或特殊需求

**步骤**:
1. 准备服务器（VPS、云服务器）
2. 安装 Docker 和 docker-compose
3. 克隆项目并配置环境变量
4. 配置 Nginx 反向代理
5. 配置 SSL 证书（Let's Encrypt）
6. 设置自动更新和监控
7. 测试完成后切换流量

**注意**: 需要一定的运维经验

---

## 快速决策树

```
需要部署富途模拟交易API
│
├─ 是否有预算？
│  │
│  ├─ 没有预算
│  │  └─ 能接受休眠？
│  │     ├─ 能接受 → Render（免费 + 保活）
│  │     └─ 不能接受 → Leapcell（免费套餐）
│  │
│  └─ 有预算
│     └─ 预算多少？
│        ├─ <$10/月 → Render Starter 或 Leapcell
│        ├─ $10-30/月 → Railway 或 Render Standard
│        └─ >$30/月 → 自建 VPS 或云服务
│
└─ 是否需要完全控制？
   ├─ 需要 → Docker 自建
   └─ 不需要 → 云平台（Leapcell/Render/Railway）
```

---

## 总结

### 最佳选择（按场景）

| 场景 | 首选 | 备选 |
|------|------|------|
| 个人学习 | Render | Leapcell |
| 个人项目 | Leapcell | Render Starter |
| 商业项目 | Leapcell | Railway |
| 企业应用 | 自建 | 云服务 |
| 开发测试 | 本地 Docker | Render |

### 推荐组合

**最经济方案**:
- 开发: 本地 Docker
- 测试: Render（免费 + 保活）
- 生产: Leapcell

**最稳定方案**:
- 开发: 本地 Docker
- 测试: Leapcell
- 生产: 自建或云服务

**最简单方案**:
- 全部使用 Leapcell 或 Render

---

## 相关文档

- [Leapcell 部署指南](LEAPCELL_DEPLOYMENT.md)
- [Render 部署指南](RENDER_DEPLOYMENT.md)
- [Railway 部署指南](RAILWAY_DEPLOYMENT.md)
- [快速部署指南](../DEPLOY.md)

---

**还有疑问？** 欢迎提交 Issue 或查看各平台的详细文档！
